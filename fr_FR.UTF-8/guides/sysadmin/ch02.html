<!-- $XConsortium: ch02.sgm /main/10 1996/12/20 20:38:28 rws $ -->
<!-- (c) Copyright 1995 Digital Equipment Corporation. -->
<!-- (c) Copyright 1995 Hewlett-Packard Company. -->
<!-- (c) Copyright 1995 International Business Machines Corp. -->
<!-- (c) Copyright 1995 Sun Microsystems, Inc. -->
<!-- (c) Copyright 1995 Novell, Inc. -->
<!-- (c) Copyright 1995 FUJITSU LIMITED. -->
<!-- (c) Copyright 1995 Hitachi. -->
<chapter id="SAG.SesMg.div.1">
<h1 id="SAG.SesMg.mkr.1">Configuration du Gestionnaire de sessions</h1>
<p>Le Gestionnaire de sessions permet de lancer le Bureau et d'enregistrer
et de r&eacute;tablir automatiquement les applications en cours, les couleurs,
les polices, le comportement de la souris, le volume sonore et les impulsions
du clavier.</p>
<p>&Agrave; l'aide du Gestionnaire de sessions, vous pouvez:</p>
<ul remap="Bullet1">
<li><p>personnaliser la session initiale de tous les utilisateurs
du Bureau,</p>
</li>
<li><p>personnaliser l'environnement et les ressources de tous les
utilisateurs,</p>
</li>
<li><p>modifier le message de lancement de la session,</p>
</li>
<li><p>modifier les param&egrave;tres des outils de lancement de
la session et des d&eacute;mons,</p>
</li>
<li><p>personnaliser l'utilisation des couleurs sur le Bureau pour
tous les utilisateurs.</p>
<informaltable id="SAG.SesMg.itbl.1" frame="All">
<tgroup cols="1" colsep="1" rowsep="1">
<colspec colwidth="4.13in">
<table>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'En quoi
consiste une session ?26'--><xref role="JumpText" linkend="SAG.SesMg.mkr.2"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Lancement
d'une session27'--><xref role="JumpText" linkend="SAG.SesMg.mkr.3"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Démarrage
d'une session27'--><xref role="JumpText" linkend="SAG.SesMg.mkr.4"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Personnalisations
supplémentaires du lancement d'une session35'--><xref role="JumpText" linkend="SAG.SesMg.mkr.8"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Fichiers
et répertoires du Gestionnaire de sessions41'--><xref role="JumpText" linkend="SAG.SesMg.mkr.10"></p></td>
</tr>
</table>
</tgroup>
</informaltable>
</li>
</ul>
<sect1 id="SAG.SesMg.div.2">
<h1 id="SAG.SesMg.mkr.2">En quoi consiste une session ?<indexterm><primary>Gestionnaire de sessions</primary><secondary>pr&eacute;sentation</secondary>
</indexterm><indexterm><primary>Session</primary><secondary>d&eacute;finition</secondary></indexterm></h1>
<p>Une session est l'ensemble des applications, des param&egrave;tres et
des ressources disponibles sur le bureau de l'utilisateur. La gestion des
sessions repr&eacute;sente l'ensemble des conventions et des protocoles permettant
au Gestionnaire de sessions d'enregistrer et de r&eacute;tablir la session
d'un utilisateur. Un utilisateur peut se connecter au syst&egrave;me et acc&eacute;der
&agrave; un ensemble d'applications, de param&egrave;tres et de ressources
identique &agrave; celui dont il disposait la derni&egrave;re fois qu'il s'est
d&eacute;connect&eacute;. Lorsqu'un utilisateur se connecte au Bureau pour
la premi&egrave;re fois, une<indexterm><primary>Session</primary><secondary>par d&eacute;faut</secondary></indexterm> session initiale par d&eacute;faut
est charg&eacute;e. Par la suite, le Gestionnaire de sessions peut distinguer
les notions de<indexterm><primary>Session</primary><secondary>en cours</secondary>
</indexterm> session en cours et de<indexterm><primary>Session</primary><secondary>initiale personnalis&eacute;e</secondary></indexterm><indexterm><primary>Session</primary><secondary>initiale personnalis&eacute;e</secondary></indexterm> session
initiale personnalis&eacute;e.</p>
<sect2 id="SAG.SesMg.div.3">
<h1>Session initiale par d&eacute;faut<indexterm><primary>Session</primary>
<secondary>initiale par d&eacute;faut</secondary></indexterm><indexterm><primary>Session</primary><secondary>initiale par d&eacute;faut</secondary></indexterm></h1>
<p>Lorsqu'un utilisateur se connecte au syst&egrave;me pour la premi&egrave;re
fois, le Gestionnaire de sessions g&eacute;n&egrave;re la session initiale
de l'utilisateur &agrave; l'aide des valeurs par d&eacute;faut du syst&egrave;me.
Par d&eacute;faut, le Gestionnaire de fichiers et le volume d'aide &ldquo;Introduction
au Bureau&ldquo; seront lanc&eacute;s.</p>
</sect2>
<sect2 id="SAG.SesMg.div.4">
<h1>Session en cours<indexterm><primary>Session</primary><secondary>en
cours</secondary></indexterm><indexterm><primary>Session</primary><secondary>en cours</secondary></indexterm></h1>
<p>La session en cours d'ex&eacute;cution est toujours consid&eacute;r&eacute;e
comme la session courante, qu'il s'agisse d'une session r&eacute;tablie, lors
de la connexion, &agrave; partir d'une session initiale personnalis&eacute;e
sauvegard&eacute;e, d'une session en cours enregistr&eacute;e ou de la session
initiale par d&eacute;faut du syst&egrave;me. Selon les param&egrave;tres
de lancement du Gestionnaire de configuration d&eacute;finis par l'utilisateur,
lorsque ce dernier met fin &agrave; la session, le Gestionnaire de sessions
peut enregistrer automatiquement la session en cours. La prochaine fois que
l'utilisateur se connectera au Bureau, le Gestionnaire de sessions lancera
donc la session en cours pr&eacute;c&eacute;demment sauvegard&eacute;e. Cela
signifie que le Bureau sera r&eacute;tabli dans le m&ecirc;me &eacute;tat
que lorsque l'utilisateur s'est d&eacute;connect&eacute; pour la derni&egrave;re
fois.</p>
</sect2>
<sect2 id="SAG.SesMg.div.5">
<h1>Session initiale personnalis&eacute;e<indexterm><primary>Session</primary>
<secondary>initiale personnalis&eacute;e</secondary></indexterm><indexterm>
<primary>Session</primary><secondary>initiale personnalis&eacute;e</secondary>
</indexterm></h1>
<p>Le Bureau peut &eacute;galement &ecirc;tre r&eacute;tabli dans le m&ecirc;me
&eacute;tat &agrave; chaque connexion, quel que soit son &eacute;tat au moment
de la d&eacute;connexion pr&eacute;c&eacute;dente. L'utilisateur peut en effet
enregistrer l'&eacute;tat de la session en cours, puis, &agrave; l'aide des
param&egrave;tres de connexion du Gestionnaire de configuration, faire en
sorte que le Gestionnaire de sessions lance cette session &agrave; chaque
connexion.</p>
</sect2>
<sect2 id="SAG.SesMg.div.6">
<h1>Sessions sp&eacute;cifiques de l'&eacute;cran<indexterm><primary>Session</primary><secondary>sp&eacute;cifique de l'&eacute;cran</secondary>
</indexterm></h1>
<p>Pour lancer une session propre &agrave; un &eacute;cran donn&eacute;,
l'utilisateur peut cr&eacute;er une session sp&eacute;cifique de l'&eacute;cran.
Pour ce faire, il peut copier le r&eacute;pertoire <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions</tt> vers le r&eacute;pertoire <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/</tt><i role="Variable">&eacute;cran</i>, o&ugrave; <i role="Variable">&eacute;cran</i> repr&eacute;sente le nom r&eacute;el de l'h&ocirc;te
(par exemple, <tt>pablo:0</tt> est correct, <tt>pablo.gato.com:0</tt> ou <tt>unix:0</tt> ne l'est pas). Lorsque l'utilisateur
se connecte &agrave; l'&eacute;cran <tt>pablo:0</tt>, le Gestionnaire
de sessions lance la session sp&eacute;cifique &agrave; cet &eacute;cran.
</p>
</sect2>
</div>
<sect1 id="SAG.SesMg.div.7">
<h1 id="SAG.SesMg.mkr.3">Lancement d'une session<indexterm><primary>Session</primary><secondary>lancement</secondary></indexterm><indexterm><primary>Gestionnaire de sessions</primary><secondary>lancement</secondary></indexterm><indexterm>
<primary>&lt;$nopage>Gestionnaire de sessions</primary><secondary>voir aussi,
session</secondary></indexterm></h1>
<p>Le Gestionnaire de sessions est lanc&eacute; par la commande <code>/usr/dt/bin/Xsession</code>.<indexterm><primary>Fichier</primary><secondary>Xsession</secondary><tertiary>lancement du Gestionnaire de sessions</tertiary>
</indexterm> Lorsque l'utilisateur se connecte &agrave; l'aide du Gestionnaire
de connexion, <code>Xsession</code> est lanc&eacute; par d&eacute;faut.
</p>
<p>L'utilisateur peut &eacute;ventuellement se connecter en utilisant la
connexion en mode caract&egrave;re traditionnel<indexterm><primary>getty</primary></indexterm> (<code>getty</code>), et en lan&ccedil;ant le
Gestionnaire de sessions manuellement gr&acirc;ce aux outils tels que <code>xinit</code> qui lancent un serveur X. Par exemple: <code>xinit /usr/dt/bin/Xsession</code>.</p>
</div>
<sect1 id="SAG.SesMg.div.8">
<h1 id="SAG.SesMg.mkr.4">D&eacute;marrage d'une session</h1>
<p>Lorsque le Gestionnaire de sessions est lanc&eacute;, il passe par un
certain nombre d'&eacute;tapes pour lancer la session de l'utilisateur.</p>
<ol>
<li><p>Il lance le script de <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.<indexterm><primary>Fichier</primary>
<secondary>.dtprofile</secondary><tertiary>fourniture</tertiary></indexterm></p>
</li>
<li><p>Il lance les scripts<code>Xsession.d</code>.<indexterm>
<primary>R&eacute;pertoire</primary><secondary>Xsession.d</secondary></indexterm>
</p>
</li>
<li><p>Il affiche un<indexterm><primary>Gestionnaire de sessions</primary><secondary>message de bienvenue</secondary></indexterm><indexterm>
<primary>Message de bienvenue</primary><secondary>affichage</secondary></indexterm> message
de bienvenue.</p>
</li>
<li><p>Il configure<indexterm><primary>Chemin de recherche</primary>
<secondary>Bureau</secondary></indexterm> les chemins de recherche du Bureau.
</p>
</li>
<li><p>Il rassemble les applications disponibles.</p>
</li>
<li><p>Il ex&eacute;cute &eacute;ventuellement les commandes des
fichiers <i role="Variable">R&eacute;pPersonnel</i><tt>/.profile</tt><indexterm><primary>Fichier</primary><secondary>.profile</secondary>
</indexterm> ou <i role="Variable">R&eacute;pPersonnel</i><tt>/.login</tt><indexterm><primary>Fichier</primary><secondary>.login</secondary>
</indexterm>.</p>
</li>
<li><p>Il lance le<indexterm><primary>ToolTalk</primary><secondary>d&eacute;mon de messagerie</secondary></indexterm> d&eacute;mon de messagerie
ToolTalk<superscript>&reg;</superscript>.</p>
</li>
<li><p>Il charge les<indexterm><primary>Session</primary><secondary>ressources</secondary></indexterm><indexterm><primary>Ressources</primary>
<secondary>session</secondary></indexterm> ressources de la session.</p>
</li>
<li><p>Il lance le<indexterm><primary>Serveur</primary><secondary>couleurs</secondary></indexterm> serveur de couleurs.</p>
</li>
<li><p>Il lance le<indexterm><primary>Gestionnaire de l'espace de
travail</primary></indexterm> Gestionnaire de l'espace de travail.</p>
</li>
<li><p>Il lance les<indexterm><primary>Applications</primary><secondary>lancement &agrave; la connexion</secondary></indexterm> applications de la
session.</p>
</li>
</orderedlist>
<p>Les sections suivantes d&eacute;crivent les &eacute;tapes list&eacute;es
ci-dessus.</p>
<sect2 id="SAG.SesMg.div.9">
<h1>Lancement du<indexterm><primary>Fichier</primary><secondary>.dtprofile</secondary><tertiary>lancement</tertiary></indexterm> script .dtprofile</h1>
<p>Lors du d&eacute;marrage d'une session, le script <code><indexterm>
<primary>Fichier</primary><secondary>Xsession</secondary></indexterm>Xsession</code> lance le script <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt><indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>dans .dtprofile</tertiary></indexterm> de
l'utilisateur. Le script <i role="Variable">R&eacute;pPersonnel</i> <code>/.dtprofile</code> est un script ex&eacute;cutable par <code>/bin/sh</code> ou <code>/bin/ksh</code> permettant aux utilisateurs de configurer<indexterm>
<primary>Variables</primary><secondary>d'environnement</secondary><tertiary>dans .dtprofile</tertiary></indexterm> les variables d'environnement pour leurs
sessions. Pour plus de d&eacute;tails sur la configuration des variables d'environnement,
reportez-vous &agrave; la section <!--Original XRef content: '&ldquo;Personnalisations
supplémentaires du lancement d'une session&ldquo;, page&numsp;35'--><xref
role="HeadingAndPage" linkend="SAG.SesMg.mkr.8">.</p>
<p>Si le script <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt> n'existe pas, par exemple, lorsqu'un utilisateur se
connecte au Bureau pour la premi&egrave;re fois, <code>Xsession</code>
copie le script <code>sys.dtprofile</code> par d&eacute;faut du bureau
dans<indexterm><primary>Shell</primary><secondary>personnalisation</secondary>
</indexterm> <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.</p>
<p><indexterm><primary>Variables</primary><secondary>d'environnement</secondary>
<tertiary>valeurs par d&eacute;faut</tertiary></indexterm>Le fichier de valeurs
par d&eacute;faut du Bureau est <tt>/usr/dt/config/<indexterm><primary>Fichier</primary><secondary>sys.dtprofile</secondary></indexterm> sys.dtprofile</tt>. Pour le personnaliser,<indexterm><primary>Shell</primary><secondary>personnalisation au niveau syst&egrave;</secondary></indexterm><indexterm>
<primary>me</primary></indexterm> copiez-le de <tt>/usr/dt/config</tt>
vers <tt>/etc/dt/config</tt> et modifiez le nouveau fichier.</p>
</sect2>
<sect2 id="SAG.SesMg.div.10">
<h1 id="SAG.SesMg.mkr.5">Lancement des scripts<indexterm><primary>R&eacute;pertoire</primary><secondary>Xsession.d</secondary><tertiary>scripts</tertiary></indexterm> Xsession.d</h1>
<p>Apr&egrave;s le lancement du script <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>, le script <code>Xsession</code>
lance les scripts <code>Xsession.d</code>. Ceux-ci sont g&eacute;n&eacute;ralement
utilis&eacute;s pour configurer d'autres variables d'environnement et lancer
des d&eacute;mons facultatifs pour la session de l'utilisateur. Les scripts <code>Xsession.d</code> par d&eacute;faut sont:</p>
<informaltable>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="187*">
<colspec colwidth="341*">
<table>
<tr>
<td align="left" valign="top"><p><tt>0010.dtpaths</tt></p></td>
<td align="left" valign="top"><p>Documente les chemins de recherche
personnalisables du Bureau.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><tt>0020.dtims</tt></p></td>
<td align="left" valign="top"><p>Lance le serveur de m&eacute;thode
de saisie facultatif.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><tt>0030.dttmpdir</tt></p></td>
<td align="left" valign="top"><p>Cr&eacute;e un r&eacute;pertoire temporaire
par utilisateur et par session.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><tt>0040.xmbind</tt></p></td>
<td align="left" valign="top"><p>Configure <tt>$XMBINDDIR</tt>
comme valeur par d&eacute;faut du Bureau.</p></td>
</tr>
</table>
</tgroup>
</informaltable>
<p>Il peut exister d'autres scripts propres aux fournisseurs dans <code>Xsession.d</code>.</p>
<p><code>Xsession</code> lance tout d'abord tous les fichiers dans
le r&eacute;pertoire <tt>/usr/dt/config/Xsession.d</tt>, suivis
de ceux du r&eacute;pertoire <tt>/etc/dt/config/Xsession.d</tt>.
</p>
<p>Les scripts <code>Xsession.d</code> par d&eacute;faut du Bureau
se trouvent dans le r&eacute;pertoire <tt>/usr/dt/config/Xsession.d</tt>. Pour personnaliser un script <code>Xsession.d</code>, copiez-le
de <tt>/usr/dt/config/Xsession.d</tt> vers <tt>/etc/dt/config/Xsession.d</tt> et modifiez le nouveau fichier. Vous devez disposer des droits
d'ex&eacute;cution n&eacute;cessaires pour effectuer cette t&acirc;che.</p>
<p><indexterm><primary>Fichier</primary><secondary>Xsession</secondary>
<tertiary>personnalisation au niveau syst&egrave;me</tertiary></indexterm><indexterm>
<primary>Gestionnaire de sessions</primary><secondary>personnalisation au
niveau syst&egrave;me</secondary></indexterm>Pour que <code>Xsession</code>
lance automatiquement l'un de vos scripts, copiez ce dernier vers <tt>/etc/dt/config/Xsession.d</tt>.</p>
<note>
<p>Lorsque vous modifiez ou cr&eacute;ez un script <code>Xsession.d</code>, v&eacute;rifiez que toutes les commandes de premier plan &eacute;mises
sont de courte dur&eacute;e, car le temps n&eacute;cessaire &agrave; leur
ex&eacute;cution aura un effet direct sur le temps de lancement de la session.
Si l'une de ces commandes ne peut pas prendre fin, le lancement de la session
s'interrompt. Si certaines commandes du script <code>Xsession.d</code>
doivent continuer de s'ex&eacute;cuter pendant la session, leur lancement
devra s'effectuer en arri&egrave;re-plan.</p>
</note>
</sect2>
<sect2 id="SAG.SesMg.div.11">
<h1><indexterm><primary>Message de bienvenue</primary><secondary>affichage</secondary></indexterm>Affichage du message de bienvenue</h1>
<p>Apr&egrave;s le lancement des scripts <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt> et <code>Xsession.d</code>, <code>Xsession</code> affiche un message de bienvenue plein &eacute;cran. Vous
pouvez le personnaliser ou le d&eacute;sactiver. Le processus client <code>dthello</code> sert &agrave; afficher ce message.</p>
<p><indexterm><primary>Message de bienvenue</primary><secondary>personnalisation</secondary></indexterm>Pour modifier le texte du message, modifiez les options
de <code>dthello</code> en changeant la variable <tt>dtstart_hello[0]</tt>.</p>
<p>Pour modifier <tt>dtstart_hello[0]</tt>, cr&eacute;ez un
script <tt>/etc/dt/config/Xsession.d</tt> d&eacute;finissant la
nouvelle valeur. Pour afficher le message du jour pour tous les utilisateurs,
cr&eacute;ez un script <code>sh</code> ou <code>ksh</code> ex&eacute;cutable,
par exemple <tt>/etc/dt/config/Xsession.d/mesvars</tt>, et configurez <tt>dtstart_hello[0]</tt> comme suit:</p>
<programlisting>dtstart_hello[0]="/usr/dt/bin/dthello -file /etc/motd &amp;"
</programlisting>
<p>De m&ecirc;me, les utilisateurs peuvent modifier le message de bienvenue
de leurs sessions en d&eacute;finissant <tt>dtstart_hello[0]</tt>
dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.</p>
<p>Pour d&eacute;sactiver ce message, indiquez <programlisting>dtstart_hello[0]=""
</programlisting>.</p>
<p>Pour plus de d&eacute;tails sur <code>dthello</code>, reportez-vous
&agrave; la page de manuel correspondante.</p>
</sect2>
<sect2 id="SAG.SesMg.div.12">
<h1><indexterm><primary>Gestionnaire de sessions</primary><secondary>d&eacute;finition
des chemins de recherche</secondary></indexterm><indexterm><primary>Chemin
de recherche</primary><secondary>d&eacute;finition par le Gestionnaire de
sessions</secondary></indexterm>Configuration des chemins de recherche du
Bureau</h1>
<p>Les chemins de recherche du Bureau sont cr&eacute;&eacute;s lors de
la connexion par <code><indexterm><primary>dtsearchpath</primary></indexterm>dtsearchpath</code>. <code>dtsearchpath</code> utilise deux cat&eacute;gories
de variables d'environnement:</p>
<informaltable>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="159*">
<colspec colwidth="369*">
<table>
<tr>
<td align="left" valign="top"><p>Variables en entr&eacute;e</p></td>
<td align="left" valign="top"><p>Variables d'environnement de niveau
syst&egrave;me et personnel dont les valeurs sont d&eacute;finies par l'administrateur
syst&egrave;me ou l'utilisateur.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>Variables en sortie</p></td>
<td align="left" valign="top"><p>Variables cr&eacute;&eacute;es par <code>dtsearchpath</code> et auxquelles ce dernier attribue des valeurs. La valeur
de chaque variable correspond au chemin de recherche de la session du Bureau.
</p></td>
</tr>
</table>
</tgroup>
</informaltable>
<p>Pour modifier les options de ligne de commande de <code>dtsearchpath</code>, modifiez la variable <tt>dtstart_searchpath</tt>.
Pour modifier cette variable<indexterm><primary>Variable</primary><secondary>dtstart_searchpath</secondary></indexterm> pour tous les utilisateurs, cr&eacute;ez
un script <code>sh</code> ou <code>ksh</code> ex&eacute;cutable,
(par exemple <tt>/etc/dt/config/Xsession.d/</tt><i>mesvars</i>), et d&eacute;finissez <tt>dtstart_searchpath</tt> comme
suit:</p>
<programlisting>dtstart_searchpath="/usr/dt/bin/dtsearchpath"</programlisting>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, modifier
les options <code>dtsearchpath</code> pour leurs sessions en d&eacute;finissant
simplement <tt>dtstart_searchpath</tt> dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.</p>
<p>Pour plus de d&eacute;tails sur <code>dtsearchpath</code>, reportez-vous
au <!--Original XRef content: 'chapitre&numsp;7, &ldquo;Chemins de recherche
du Bureau'--><xref role="ChapNumAndTitle" linkend="SAG.Datab.mkr.1">. Pour
plus de d&eacute;tails sur les options <code>dtsearchpath</code>, reportez-vous
&agrave; la page de manuel correspondante.</p>
</sect2>
<sect2 id="SAG.SesMg.div.13">
<h1>Rassemblement des applications disponibles</h1>
<p>L'&eacute;tape qui suit la configuration des chemins de recherche du
Bureau consiste &agrave; rassembler les applications disponibles &agrave;
l'aide de <code>dtappgather</code>. Pour modifier les options de la
ligne de commande de<indexterm><primary>Gestionnaire d'applications</primary>
<secondary>rassemblement des applications</secondary></indexterm><indexterm>
<primary>Gestionnaire de sessions</primary><secondary>rassemblement des applications</secondary></indexterm><indexterm><primary>Applications</primary><secondary>rassembl&eacute;</secondary></indexterm><indexterm><primary>es par le Gestionnaire
de sessions</primary></indexterm><indexterm><primary>dtappgather</primary>
</indexterm> <code>dtappgather</code>, modifiez la variable <tt>dtstart_appgather</tt>. Pour modifier cette variable<indexterm><primary>Variable</primary><secondary>dtstart_appgather</secondary></indexterm> pour
tous les utilisateurs, cr&eacute;ez un script <code>sh</code> ou <code>ksh</code> ex&eacute;cutable (par exemple <tt>/etc/dt/config/Xsession.d/</tt><em>mesvars</em>), et d&eacute;finissez <tt>dtstart_appgather</tt> comme indiqu&eacute; ci-apr&egrave;s.</p>
<programlisting>dtstart_appgather="/usr/dt/bin/dtappgather &amp;"</programlisting>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, modifier
les options <code>dtappgather</code> pour leurs propres sessions en
d&eacute;finissant simplement <tt>dtstart_appgather</tt> dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.
</p>
<p>Pour plus de d&eacute;tails, reportez-vous &agrave; la page de manuel <code>dtappgather</code> (4).</p>
</sect2>
<sect2 id="SAG.SesMg.div.14">
<h1 id="SAG.SesMg.mkr.6"><indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>lancement dans .login ou .profile</tertiary>
</indexterm>Lancement facultatif du script .profile ou .login<indexterm>
<primary>Shell</primary><secondary>lancement dans .profile ou .login</secondary>
</indexterm><indexterm><primary>Fichier</primary><secondary>.profile</secondary>
<tertiary>lancement</tertiary></indexterm><indexterm><primary>Fichier</primary>
<secondary>.login</secondary><tertiary>lancement</tertiary></indexterm></h1>
<p><code>Xsession</code> permet de lancer les scripts <i role="Variable">R&eacute;pPersonnel</i><tt>/.profile</tt> ou <i role="Variable">R&eacute;pPersonnel</i><tt>/.login</tt> traditionnels d'un
utilisateur. Par d&eacute;faut, cette fonction est d&eacute;sactiv&eacute;e.
Pour permettre &agrave; <code>Xsession</code> de lancer le script <tt>.profile</tt> ou <tt>.login</tt>, indiquez <code>true</code> comme valeur pour la variable<indexterm><primary>Variable</primary>
<secondary>DTSOURCEPROFILE</secondary></indexterm> <systemitem>DTSOURCEPROFILE</systemitem>.</p>
<p>Pour modifier <systemitem>DTSOURCEPROFILE</systemitem> pour tous les
utilisateurs, cr&eacute;ez un script <tt>/etc/dt/config/Xsession.d</tt>
qui d&eacute;finit la nouvelle valeur. Pour attribuer la valeur <code>true</code> &agrave; <systemitem>DTSOURCEPROFILE</systemitem> pour tous
les utilisateurs, cr&eacute;ez un script <code>sh</code> ou <code>ksh</code> ex&eacute;cutable, par exemple <tt>/etc/dt/config/Xsession.d/</tt><i>mesvars,</i> et d&eacute;finissez <systemitem>DTSOURCEPROFILE</systemitem> comme suit:</p>
<programlisting>DTSOURCEPROFILE=true</programlisting>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, modifier <systemitem>DTSOURCEPROFILE</systemitem> pour leurs propres sessions en conf&eacute;rant
&agrave; <systemitem>DTSOURCEPROFILE</systemitem> la valeur <code>true</code> dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.</p>
</sect2>
<sect2 id="SAG.SesMg.div.15">
<h1>Lancement du<indexterm><primary>ToolTalk</primary><secondary>d&eacute;mon
de messagerie</secondary></indexterm> d&eacute;mon de messagerie ToolTalk</h1>
<p>Le d&eacute;mon de messagerie ToolTalk, <code>ttsession</code>,
permet &agrave; des applications ind&eacute;pendantes de communiquer entre
elles, sans op&eacute;rations d'identification directe pr&eacute;alables.
Les applications cr&eacute;ent et envoient des messages ToolTalk pour communiquer
entre elles. <code>ttsession</code> communique sur le r&eacute;seau
pour transmettre les messages.</p>
<p>Pour modifier les options de ligne de commande de <code><indexterm>
<primary>ttsession</primary><secondary>lancement</secondary></indexterm>ttsession</code>, modifiez la variable <tt>dtstart_ttsession</tt>. Pour
modifier cette variable<indexterm><primary>Variable</primary><secondary>dtstart_ttsession</secondary></indexterm> pour tous les utilisateurs, cr&eacute;ez
un script <code>sh</code> ou <code>ksh</code> ex&eacute;cutable
(par exemple <tt>/etc/dt/config/Xsession.d/</tt><i role="Variable">mesvars</i>), et d&eacute;finissez <tt>dtstart_ttsession</tt>
de la mani&egrave;re indiqu&eacute;e ci-apr&egrave;s:</p>
<programlisting>dtstart_ttsession=&ldquo;/usr/dt/bin/ttsession -s"</programlisting>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, modifier
les options de <code>ttsession</code> pour leurs propres sessions en
d&eacute;finissant <tt>dtstart_ttsession</tt> dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.</p>
<p>Pour plus de d&eacute;tails sur les options de <code>ttsession</code>,
reportez-vous &agrave; la page de manuel correspondante. Pour plus de d&eacute;tails
sur <code>ttsession</code>, reportez-vous &agrave; la section D&eacute;marrage
&agrave; l'aide de la messagerie ToolTalk.</p>
</sect2>
<sect2 id="SAG.SesMg.div.16">
<h1><indexterm><primary>Gestionnaire de sessions</primary><secondary>client</secondary></indexterm>Lancement du client Gestionnaire de sessions</h1>
<p>&Agrave; ce stade, <code>Xsession</code> lance <tt>/usr/dt/bin/dtsession</tt>, qui poursuit le processus de lancement de la session.</p>
</sect2>
<sect2 id="SAG.SesMg.div.17">
<h1 id="SAG.SesMg.mkr.7">Chargement des ressources d'une session<indexterm>
<primary>Gestionnaire de sessions</primary><secondary>chargement des ressources</secondary></indexterm><indexterm><primary>Ressources</primary><secondary>chargement</secondary></indexterm></h1>
<p>Le Gestionnaire de sessions utilise la propri&eacute;t&eacute; <systemitem>RESOURCE_MANAGER</systemitem> du serveur X pour rendre les ressources du Bureau
accessibles &agrave; toutes les applications. Le Gestionnaire de sessions
active<systemitem>RESOURCE_MANAGER</systemitem> en:</p>
<ul remap="Bullet1">
<li><p>chargeant les ressources par d&eacute;faut du syst&egrave;me
;</p>
</li>
<li><p>fusionnant les ressources syst&egrave;me indiqu&eacute;es
par l'administrateur syst&egrave;me;</p>
</li>
<li><p>fusionnant les ressources pr&eacute;cis&eacute;es par l'utilisateur.
</p>
</li>
</ul>
<p>Les ressources par d&eacute;faut du Bureau se trouvent dans <tt>/usr/dt/config/</tt><i role="Variable">langue</i><tt>/sys.resources</tt>.<indexterm><primary>Fichier</primary><secondary>sys.resources</secondary></indexterm><indexterm><primary>Ressources</primary>
<secondary>valeurs par d&eacute;faut du Bureau</secondary></indexterm> Ces
ressources sont accessibles &agrave; chaque session utilisateur par l'interm&eacute;diaire
de la propri&eacute;t&eacute; <systemitem>RESOURCE_MANAGER</systemitem>. Ce
fichier ne doit pas &ecirc;tre modifi&eacute;, puisqu'il est remplac&eacute;
&agrave; chaque nouvelle installation du Bureau.</p>
<p>Vous pouvez enrichir les ressources par d&eacute;faut du syst&egrave;me
en cr&eacute;ant <tt>/etc/dt/config/</tt><i>langue</i><tt>/sys.resources</tt>.<indexterm><primary>Fichier</primary><secondary>sys.resources</secondary></indexterm> Dans ce fichier, vous pouvez remplacer
les valeurs par d&eacute;faut ou indiquer des ressources suppl&eacute;mentaires
pour tous les utilisateurs du Bureau. Etant donn&eacute; que ce fichier est
fusionn&eacute; dans les ressources par d&eacute;faut du Bureau lors du lancement
de la session, seules les sp&eacute;cifications de ressources nouvelles ou
modifi&eacute;es doivent y &ecirc;tre inscrites. Les ressources indiqu&eacute;es
dans ce fichier sont accessibles &agrave; chaque session utilisateur par l'interm&eacute;diaire
de la propri&eacute;t&eacute; <systemitem>RESOURCE_MANAGER</systemitem>. Elles
sont prioritaires par rapport &agrave; celles du fichier de ressources par
d&eacute;faut du Bureau.</p>
<p>Les utilisateurs peuvent enrichir les ressources par d&eacute;faut du
Bureau et les ressources syst&egrave;me en utilisant leur fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>.
Les ressources indiqu&eacute;es dans ce fichier sont accessibles &agrave;
cette session utilisateur gr&acirc;ce &agrave; la propri&eacute;t&eacute; <systemitem>RESOURCE_MANAGER</systemitem>. Elles sont prioritaires par rapport &agrave;
celles des fichiers de ressources par d&eacute;faut du Bureau ou de l'administrateur
syst&egrave;me.</p>
<note>
<p>L'utilitaire X Toolkit Intrinsics indique qu'il va charger des ressources
pour une application &agrave; partir de<indexterm><primary>Caract&eacute;ristique</primary><secondary>RESOURCE_MANAGER</secondary></indexterm> <systemitem>RESOURCE_MANAGER</systemitem> ou de <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>, mais pas des deux. G&eacute;n&eacute;ralement,
cela signifie que le fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt> de l'utilisateur est ignor&eacute;. Cependant, le Gestionnaire
de sessions prend en charge le fichier <i role="Variable">R&eacute;pPersonnel</i>/<tt><indexterm><primary>Fichier</primary><secondary>.Xdefaults</secondary></indexterm>.Xdefaults</tt> en le fusionnant avec <systemitem>RESOURCE_MANAGER</systemitem> lors du lancement de la session, comme d&eacute;crit
pr&eacute;c&eacute;demment. Si un utilisateur modifie <i role="Variable">R&eacute;pPersonnel</i>/<tt>.Xdefaults</tt>, ces modifications
ne seront pas prises en compte pour les nouvelles applications tant que l'utilisateur
n'aura invoqu&eacute; l'action &ldquo;Recharger ressources&rdquo;.<indexterm>
<primary>Actions</primary><secondary>Recharger ressources</secondary></indexterm> Cette
action indique au Gestionnaire de sessions de recharger <tt>RESOURCE_MANAGER</tt> avec les ressources par d&eacute;faut, les ressources syst&egrave;me
et celles indiqu&eacute;es par l'utilisateur. Les modifications ainsi apport&eacute;es
aux fichiers de ressources syst&egrave;me et personnels sont accessibles &agrave;
toutes les applications.</p>
</note>
<p>Pour plus de d&eacute;tails, reportez-vous &agrave;:</p>
<ul remap="Bullet1">
<li><p><!--Original XRef content: '&ldquo;Définition de ressources
d'applications&ldquo;, page&numsp;272'--><xref role="SecTitleAndPageNum" linkend="SAG.FACol.mkr.2">&numsp;;
</p>
</li>
<li><p>la page de manuel <tt>dtresourcesfile(4)</tt>.
</p>
</li>
</ul>
</sect2>
<sect2 id="SAG.SesMg.div.18">
<h1>Lancement du serveur de couleurs<indexterm><primary>Serveur</primary>
<secondary>couleurs</secondary><tertiary>lancement</tertiary></indexterm></h1>
<p>Le Gestionnaire de sessions sert de<indexterm><primary>Serveur</primary>
<secondary>couleurs</secondary><tertiary>ressources</tertiary></indexterm> serveur
de couleurs pour le Bureau et propose le jeu de ressources suivant <code>dtsession</code> qui peuvent &ecirc;tre utilis&eacute;es pour le configurer.
</p>
<informaltable>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="228*">
<colspec colwidth="228*">
<table>
<tr>
<td align="left" valign="top"><p><code>f<indexterm><primary>Ressources</primary><secondary>foregroundColor</secondary></indexterm> oregroundColor</code></p></td>
<td align="left" valign="top"><p>V&eacute;rifie si un pixel est attribu&eacute;
&agrave; la couleur de l'avant-plan.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code><indexterm><primary>Ressources</primary><secondary>dynamicColor</secondary></indexterm>dynamicColor</code></p></td>
<td align="left" valign="top"><p>Indique si des couleurs en lecture
seule sont attribu&eacute;es.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code><indexterm><primary>Ressources</primary><secondary>shadowPixmaps</secondary></indexterm>shadowPixmaps</code></p></td>
<td align="left" valign="top"><p>Indique si des couleurs sont attribu&eacute;es
&agrave; l'ombrage du haut ou du bas.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code>colorUse</code></p></td>
<td align="left" valign="top"><p>Limite l'attribution de couleurs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p><code><indexterm><primary>Ressources</primary><secondary>writeXrdbColors</secondary></indexterm>writeXrdbColors</code></p></td>
<td align="left" valign="top"><p>Indique si les ressources <tt>*background</tt> et <tt>*foreground</tt> sont plac&eacute;es
dans la base de donn&eacute;es des ressources.</p></td>
</tr>
</table>
</tgroup>
</informaltable>
<p>Vous pouvez d&eacute;finir les ressources du serveur de couleurs pour
tous les utilisateurs en cr&eacute;ant <tt>/etc/dt/config/</tt> <i>langue</i><tt>/sys.resources</tt> et en indiquant les ressources
du serveur de couleurs dans ce fichier.</p>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, d&eacute;finir
les ressources du serveur de couleurs pour leurs propres sessions en indiquant
les ressources correspondantes dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>.</p>
<p>Pour plus de d&eacute;tails sur la d&eacute;finition des ressources
du serveur de couleurs, reportez-vous &agrave; la section <!--Original XRef
content: '&ldquo;Gestion des couleurs&ldquo;, page&numsp;282'--><xref role="SecTitleAndPageNum"
linkend="SAG.FACol.mkr.9">.</p>
</sect2>
<sect2 id="SAG.SesMg.div.19">
<h1><indexterm><primary>Gestionnaire de l'espace de travail</primary><secondary>lancement</secondary></indexterm><indexterm><primary>Gestionnaire de sessions</primary><secondary>lancement du Gestionnaire de l'espace de travail</secondary>
</indexterm>Lancement du Gestionnaire de l'espace de travail</h1>
<p>Le Gestionnaire de sessions permet le lancement du Gestionnaire de l'espace
de travail. Par d&eacute;faut, <tt>/usr/dt/bin/dtwm</tt><indexterm>
<primary>Gestionnaire de l'espace de travail</primary><secondary>lancement</secondary></indexterm> est lanc&eacute;. Un autre gestionnaire de fen&ecirc;tres
peut &ecirc;tre indiqu&eacute; par la ressource<indexterm><primary>Ressource</primary><secondary>wmStartupCommand</secondary></indexterm><indexterm>
<primary>Gestionnaire de fen&ecirc;tres</primary><secondary>modification</secondary>
</indexterm> <systemitem>wmStartupCommand</systemitem>.</p>
<p>Pour indiquer un autre gestionnaire de fen&ecirc;tres accessibles &agrave;
tous, cr&eacute;ez le fichier <tt>/etc/dt/config/</tt> <i>langue</i><tt>/sys.resources</tt>. Indiquez ensuite le chemin
d'acc&egrave;s complet et les options de ce gestionnaire &agrave; l'aide de
la ressource <systemitem>Dtsession*wmStartupCommand</systemitem> du fichier.
</p>
<p>Les utilisateurs peuvent, de la m&ecirc;me mani&egrave;re, indiquer
un autre gestionnaire de fen&ecirc;tres pour leurs propres sessions en d&eacute;finissant
simplement la ressource <systemitem>Dtsession*wmStartupCommand</systemitem>
dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>.</p>
<p>Pour plus de d&eacute;tails sur le Gestionnaire de fen&ecirc;tres, reportez-vous
au <!--Original XRef content: 'chapitre&numsp;14, &ldquo;Personnalisation
du Gestionnaire de l'espace de travail'--><xref role="ChapNumAndTitle" linkend="SAG.WMCnf.mkr.1"></p>
</sect2>
<sect2 id="SAG.SesMg.div.20">
<h1>Lancement des applications de la session<indexterm><primary>Applications</primary><secondary>lancement &agrave; la connexion</secondary></indexterm><indexterm>
<primary>Gestionnaire de sessions</primary><secondary>lancement des applications</secondary></indexterm></h1>
<p>Lors du lancement d'une session, le Gestionnaire de sessions relance
toutes les applications sauvegard&eacute;es comme composants de la session
pr&eacute;c&eacute;dente. Le fichier <tt>/usr/dt/config/</tt><i role="Variable">langue</i><tt>/<indexterm><primary>Fichier</primary>
<secondary>sys.session</secondary></indexterm> sys.session</tt> r&eacute;pertorie
les applications syst&egrave;me &agrave; r&eacute;tablir par d&eacute;faut
pour toute session. Ce fichier ne doit pas &ecirc;tre modifi&eacute; &eacute;tant
donn&eacute; qu'il est remplac&eacute; &agrave; chaque nouvelle installation
du Bureau.</p>
<p>Pour plus de d&eacute;tails, reportez-vous &agrave; la page de manuel <filename moreinfo="RefEntry">dtsessionfile(4)</tt>.</p>
<p><indexterm><primary>Gestionnaire de sessions</primary><secondary>personnalisation
du lancement des applications</secondary></indexterm>L'administrateur syst&egrave;me
peut remplacer le jeu d'applications lanc&eacute;es lors de la session initiale
de l'utilisateur en copiant <tt>/usr/dt/config/</tt><i role="Variable">langue</i><tt>/sys.session</tt> dans <tt>/etc/dt/config/</tt><i role="Variable">langue</i><tt>/sys.session</tt>
et en modifiant ce dernier. Contrairement aux fichiers de ressources, ce fichier
remplace int&eacute;gralement le fichier par d&eacute;faut du Bureau.Vous
pouvez donc faire une copie de ce dernier et effectuer toutes les modifications
n&eacute;cessaires.</p>
</sect2>
</div>
<sect1 id="SAG.SesMg.div.21">
<h1 id="SAG.SesMg.mkr.8">Personnalisations suppl&eacute;mentaires du lancement
d'une session</h1>
<p>Cette section traite des sujets suivants:</p>
<ul remap="Bullet1">
<li><p>d&eacute;finition des variables d'environnement</p>
</li>
<li><p>d&eacute;finition des ressources</p>
</li>
<li><p>utilisation de sessions d&eacute;pendantes de l'&eacute;cran
</p>
</li>
<li><p>ex&eacute;cution de scripts lors de la connexion</p>
</li>
<li><p>r&eacute;cup&eacute;ration d'une session de sauvegarde</p>
</li>
</ul>
<sect2 id="SAG.SesMg.div.22" role="Procedure">
<h1 id="SAG.SesMg.mkr.9"><indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>d&eacute;finition</tertiary></indexterm><indexterm>
<primary>Variables</primary><secondary>d'environnement</secondary></indexterm>D&eacute;finition
de variables d'environnement</h1>
<ul>
<li><p><indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>niveau syst&egrave;me</tertiary></indexterm>Pour d&eacute;finir
des variables d'environnement syst&egrave;me, cr&eacute;ez un fichier dans
le r&eacute;pertoire <tt>/etc/dt/config/Xsession.d</tt><indexterm>
<primary>R&eacute;pertoire</primary><secondary>Xsession.d</secondary></indexterm>
permettant de d&eacute;finir<indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>exportation</tertiary></indexterm> et
d'exporter la variable.</p>
<p>Par exemple, si vous cr&eacute;ez un script <code>ksh</code> ex&eacute;cutable, <tt>/etc/dt/config/Xsession.d/</tt><i role="Variable">mesvars,</i></p>
<p>contenant:</p>
<para remap="CodeIndent1"><code>export VARIABLE=</code>"<i role="Variable">valeur</i>"</p>
<p>alors, la variable <code>VARIABLE</code> sera d&eacute;finie dans
chaque environnement utilisateur &agrave; la prochaine connexion.</p>
</li>
<li><p><indexterm><primary>Variables</primary><secondary>d'environnement</secondary><tertiary>personnelles</tertiary></indexterm>Pour d&eacute;finir
des variables d'environnement personnelles, d&eacute;finissez-les dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dtprofile</tt>.<indexterm>
<primary>Fichier</primary><secondary>.dtprofile</secondary><tertiary>d&eacute;finition
de variables d'environnement</tertiary></indexterm></p>
</li>
</ul>
<note>
<p><tt>.dtprofile</tt><indexterm><primary>Fichier</primary>
<secondary>.dtprofile</secondary><tertiary>syntaxe</tertiary></indexterm> supporte
uniquement la syntaxe <code>/bin/sh</code> ou <code>/bin/ksh</code></p>
</note>
<p>Par exemple:</p>
<programlisting>export VARIABLE="<i role="Variable">valeur</i>"
</programlisting>
<p>d&eacute;finit la variable <systemitem>VARIABLE</systemitem> dans chaque
environnement utilisateur &agrave; la prochaine connexion.</p>
<note>
<p>Le Gestionnaire de sessions ne lit pas automatiquement le fichier <tt>.login</tt>. <tt>.profile</tt><indexterm><primary>Fichier</primary><secondary>.profile</secondary><tertiary>non lu par le Gestionnaire
de connexion</tertiary></indexterm> ou<indexterm><primary>Fichier</primary>
<secondary>.login</secondary><tertiary>non lu par le Gestionnaire de connexion</tertiary></indexterm><indexterm><primary>&lt;$nopage>Shell</primary><secondary>Voir aussi variables d'environnement, .profile, .login, .dtprofile</secondary>
</indexterm> Cependant, il peut &ecirc;tre configur&eacute; de fa&ccedil;on
&agrave; utiliser ces fichiers. Reportez-vous &agrave; la section <!--Original
XRef content: '&ldquo;Lancement facultatif du script .profile ou .login&ldquo;,
page&numsp;31'--><xref role="SecTitleAndPageNum" linkend="SAG.SesMg.mkr.6">.
</p>
</note>
</sect2>
<sect2 id="SAG.SesMg.div.23" role="Procedure">
<h1>D&eacute;finition des ressources<indexterm><primary>Ressources</primary>
<secondary>d&eacute;finition</secondary></indexterm></h1>
<ul>
<li><p>Pour d&eacute;finir les ressources au niveau syst&egrave;me,
ajoutez-les au fichier <tt>/etc/dt/config/</tt><i role="Variable">langue</i><tt>/sys.resources</tt>.<indexterm><primary>Fichier</primary><secondary>sys.resources</secondary></indexterm> Il vous sera peut-&ecirc;tre
demand&eacute; de cr&eacute;er ce fichier.</p>
<p>Par exemple, si dans <tt>/etc/dt/config/C/sys.resources</tt>,
vous indiquez:</p>
<para remap="CodeIndent1"><code>AnApplication*resource:</code> <i role="Variable">valeur</i></p>
<p>alors la ressource <systemitem>AnApplication*resource</systemitem> sera
d&eacute;finie dans la caract&eacute;ristique <tt>RESOURCE_MANAGER</tt><indexterm>
<primary>Caract&eacute;ristique</primary><secondary>RESOURCE_MANAGER</secondary>
</indexterm> de chaque utilisateur &agrave; la prochaine connexion.</p>
</li>
<li><p>Pour d&eacute;finir des ressources personnelles, ajoutez les
ressources au fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>.</p>
</li>
</ul>
</sect2>
<sect2 id="SAG.SesMg.div.24" role="Procedure">
<h1>D&eacute;finition de ressources sp&eacute;cifiques &agrave; un poste
de travail<indexterm><primary>Ressources</primary><secondary>sp&eacute;cifiques
de l'&eacute;cran</secondary></indexterm><indexterm><primary>Ressources</primary>
<secondary>sp&eacute;cifiques de l'&eacute;cran</secondary></indexterm></h1>
<p>Vous pouvez d&eacute;finir des ressources sp&eacute;cifiques &agrave;
un poste de travail pour tous les utilisateurs du syst&egrave;me. Les utilisateurs
peuvent &eacute;galement d&eacute;finir des ressources sp&eacute;cifiques
&agrave; leur poste de travail, mais celles-ci sont limit&eacute;es &agrave;
leur session. Vous pouvez ainsi faire varier les ressources selon le poste
de travail utilis&eacute; pour la connexion au Bureau.</p>
<ol>
<li><p>Pour d&eacute;finir des ressources sp&eacute;cifiques &agrave;
un poste de travail pour tous les utilisateurs du syst&egrave;me, cr&eacute;ez
un fichier <tt>/etc/dt/config/</tt><i role="Variable">langue</i><tt>/sys.resources</tt> d&eacute;finissant ces ressources.
</p>
</li>
<li><p>Pour d&eacute;finir des ressources sp&eacute;cifiques de l'&eacute;cran
pour un utilisateur donn&eacute;, d&eacute;finissez les ressources dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.Xdefaults</tt>.
</p>
</li>
</orderedlist>
<p>Ces ressources doivent &ecirc;tre incluses dans des instructions conditionnelles
de type <code><indexterm><primary>Instructions cpp</primary></indexterm>cpp</code>. Une macro<indexterm><primary>Macro DISPLAY_nom_&eacute;cran</primary>
</indexterm> <tt>DISPLAY_</tt><i>nom_&eacute;cran</i>
est d&eacute;finie en fonction de la valeur de la variable <tt>$DISPLAY</tt>. Cette macro convertit tous les . (points) et les : (deux points)
en _ (caract&egrave;res de soulignement), supprime toute mention de num&eacute;ro
d'&eacute;cran (un poste de travail peut &eacute;ventuellement comporter plusieurs
&eacute;crans graphiques g&eacute;r&eacute;s par un seul et m&ecirc;me serveur
X) et attribue le pr&eacute;fixe <tt>DISPLAY_</tt> au r&eacute;sultat.
</p>
<p>Par exemple, une valeur d'&eacute;cran <tt>$DISPLAY</tt>
de <tt>:0</tt> donnerait <tt>DISPLAY_0</tt>, et une
autre valeur d'&eacute;cran <tt>$DISPLAY</tt> <tt>blanco.gato.com:0.0</tt> donnerait <tt>DISPLAY_blanco_gato_com_0</tt>. Le r&eacute;sultat
peut &ecirc;tre utilis&eacute; comme partie d'un test <code>cpp</code>
dans un fichier de ressources de la session. Par exemple, si dans <tt>/etc/dt/config/C/sys.resources</tt> vous indiquez:</p>
<programlisting>Myapp*resource: valeur

#ifdef DISPLAY_blanco_gato_com_0
MyApp*resource: valeur1
#endif

#ifdef DISPLAY_pablo_gato_com_0
Myapp*resource: valeur2
#endif</programlisting>
<p>la ressource <systemitem>MyApp*resource</systemitem> aura, dans <tt>RESOURCE_MANAGER</tt>, la valeur <tt>valeur1</tt> lorsque
l'utilisateur se connecte &agrave; l'&eacute;cran <tt>blanco.gato.com:0</tt>; <tt>valeur2</tt> lorsqu'il se connecte &agrave; <tt>pablo.gato.com:0;</tt> et <tt>valeur0</tt> dans tous les
autres cas.</p>
</sect2>
<sect2 id="SAG.SesMg.div.25" role="Procedure">
<h1>Modification des applications de la session initiale<indexterm><primary>Session</primary><secondary>initiale</secondary></indexterm></h1>
<p>Vous pouvez int&eacute;grer d'autres applications &agrave; la session
initiale de l'utilisateur.</p>
<ol>
<li><p>Copiez <tt>/usr/dt/config/</tt><i role="Variable">langue</i><tt>/sys.session</tt> dans <tt>/etc/dt/config/</tt><i role="Variable">langue</i><tt>/sys.session.</tt></p>
</li>
<li><p>Modifiez le nouveau fichier <tt><indexterm><primary>Fichier</primary><secondary>sys.session</secondary></indexterm>sys.session</tt>.</p>
<p>Chaque entr&eacute;e de <tt>sys.session</tt> appara&icirc;t
sous la forme:</p>
<para remap="CodeIndent1"><code>dtsmcmd -cmd</code> <i remap="Emphasis">commande_et_options</i><indexterm><primary>Commandes</primary><secondary>dtsmcmd</secondary></indexterm></p>
<p>Pour ajouter une application &agrave; la session initiale d'un utilisateur,
cr&eacute;ez une nouvelle entr&eacute;e <tt>sys.session</tt> avec
son chemin d'acc&egrave;s complet. Par exemple, pour lancer <tt>/usr/bin/X11/xclock</tt> dans la session initiale d'un utilisateur, ajoutez une entr&eacute;e <code>xclock</code> &agrave; <tt>/etc/dt/config/C/sys.session</tt>
:</p>
<programlisting># 
# Lancement de xclock... 
# 
dtsmcmd -cmd &ldquo;/usr/bin/X11/xclock-digital&rdquo;</programlisting>
</li>
</orderedlist>
</sect2>
<sect2 id="SAG.SesMg.div.26" role="Procedure">
<h1>Configuration d'une session sp&eacute;cifique &agrave; un poste de
travail<indexterm><primary>Session</primary><secondary>sp&eacute;cifique
de l'&eacute;cran</secondary></indexterm><indexterm><primary>Session</primary>
<secondary>sp&eacute;cifique de l'&eacute;cran</secondary></indexterm></h1>
<p>L'utilisateur peut configurer une session sp&eacute;cifique pour adapter
une session &agrave; un poste de travail particulier.</p>
<ul>
<li><p>Copiez le r&eacute;pertoire <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/<indexterm><primary>R&eacute;pertoire</primary><secondary>sessions</secondary></indexterm> sessions</tt> dans <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/</tt><i role="Variable">display</i> o&ugrave; <i role="Variable">&eacute;cran</i> correspond
au nom r&eacute;el de l'h&ocirc;te (<tt>pablo:0</tt> est correct, <tt>pablo.gato.com:0</tt> ou <tt>unix:0</tt> ne l'est pas).
</p>
</li>
</ul>
<p>Par exemple, pour cr&eacute;er une session sp&eacute;cifique au poste
de travail <tt>pablo.gato.com:0</tt>:</p>
<programlisting>cp -r <i role="Variable">R&eacute;pPersonnel</i>/.dt/sessions <i role="Variable">R&eacute;pPersonnel</i>/.dt/pablo:0</programlisting>
<p>Lors de la prochaine connexion de l'utilisateur depuis le poste de travail <tt>pablo.gato.com:0</tt>, le Gestionnaire de sessions lancera la session
sp&eacute;cifique de l'&eacute;cran.</p>
</sect2>
<sect2 id="SAG.SesMg.div.27">
<h1>Ex&eacute;cution de commandes suppl&eacute;mentaires lors du lancement
de la session et lors de la d&eacute;connexion</h1>
<p>L'utilisateur peut demander le lancement de commandes suppl&eacute;mentaires
lorsqu'il se connecte &agrave; sa session du Bureau. Cela est particuli&egrave;rement
utile pour configurer des param&egrave;tres X qui ne sont pas sauvegard&eacute;s
par le Gestionnaire de sessions. Par exemple, il peut utiliser <code>xsetroot</code> pour personnaliser l'aspect du pointeur de la souris dans la fen&ecirc;tre
racine (c'est-&agrave;- dire, dans l'espace de travail). Une autre utilisation
possible est de lancer des applications ne pouvant &ecirc;tre enregistr&eacute;es
et r&eacute;tablies par le Gestionnaire de sessions. Si une application n'est
pas relanc&eacute;e lorsque la session est r&eacute;tablie, l'utilisateur
peut la lancer &agrave; l'aide de cette m&eacute;thode.</p>
</sect2>
<sect2 id="SAG.SesMg.div.28" role="Procedure">
<h1><indexterm><primary>Gestionnaire de sessions</primary><secondary>ex&eacute;cution
de commandes suppl&eacute;mentaires</secondary></indexterm><indexterm><primary>Session</primary><secondary>ex&eacute;cution de commandes au lancement</secondary>
</indexterm>Ex&eacute;cution de commandes suppl&eacute;mentaires lors du lancement
de la session</h1>
<ul>
<li><p>Cr&eacute;ez le fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions/<indexterm><primary>Fichier</primary><secondary>sessionetc</secondary></indexterm>sessionetc</tt> contenant les commandes.
</p>
<p>G&eacute;n&eacute;ralement, ce fichier est un script et doit disposer
des droits d'ex&eacute;cution appropri&eacute;s. Les proc&eacute;dures lanc&eacute;es
dans <code>sessionetc</code> doivent &ecirc;tre ex&eacute;cut&eacute;es
en arri&egrave;re-plan.</p>
</li>
</ul>
<note>
<p>N'utilisez pas <code>sessionetc</code> pour lancer des clients
r&eacute;tablis automatiquement par le Gestionnaire de sessions. Sinon, vous
risqueriez de lancer plusieurs copies d'une m&ecirc;me application. Vous ne
le remarquerez peut-&ecirc;tre pas tout de suite, car les fen&ecirc;tres des
copies peuvent se chevaucher.</p>
</note>
</sect2>
<sect2 id="SAG.SesMg.div.29" role="Procedure">
<h1>Ex&eacute;cution de commandes suppl&eacute;mentaires lors de la d&eacute;connexion<indexterm>
<primary>Session</primary><secondary>ex&eacute;cution de commande lors de
la d&eacute;connexion</secondary></indexterm><indexterm><primary>Gestionnaire
de sessions</primary><secondary>ex&eacute;cution de commandes lors de la d&eacute;connexion</secondary></indexterm></h1>
<p><code>sessionexit</code> est un fichier associ&eacute; &agrave; <code>sessionetc</code><indexterm><primary>Fichier</primary><secondary>sessionexit</secondary></indexterm>. Utilisez ce fichier pour effectuer certaines op&eacute;rations
non support&eacute;es par le Gestionnaire de sessions, lorsque vous quittez
une session.</p>
<ul>
<li><p>Cr&eacute;ez le fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions/sessionexit</tt>.</p>
<p>Comme <code>sessionetc</code>, ce fichier est g&eacute;n&eacute;ralement
un script muni des droits d'ex&eacute;cution appropri&eacute;s.</p>
</li>
</ul>
</sect2>
<sect2 id="SAG.SesMg.div.30" role="Procedure">
<h1>R&eacute;tablissement d'une session pr&eacute;alablement enregistr&eacute;e<indexterm>
<primary>Session</primary><secondary>r&eacute;tablissement</secondary></indexterm><indexterm>
<primary>Gestionnaire de sessions</primary><secondary>enregistrement de sessions</secondary></indexterm><indexterm><primary>Session</primary><secondary>enregistrement</secondary></indexterm></h1>
<p>Lorsque le Gestionnaire de sessions enregistre une session, les informations
s'y rapportant sont inscrites dans le r&eacute;pertoire <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions</tt> ou <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/</tt> <i>&eacute;cran</i> si vous utilisez une session sp&eacute;cifique &agrave;
un poste de travail. Le Gestionnaire de sessions cr&eacute;e, dans ces r&eacute;pertoires,
un sous- r&eacute;pertoire appel&eacute; <code>current</code> ou <code>home</code> permettant de stocker les informations respectives des sessions
en cours ou initiales personnalis&eacute;es. Avant le stockage des informations,
le Gestionnaire de sessions enregistre la session pr&eacute;c&eacute;dente
sous ce nom et la m&eacute;morise dans <tt><indexterm><primary>R&eacute;pertoire</primary><secondary>current.old</secondary></indexterm>current.old</tt>
ou <tt><indexterm><primary>R&eacute;pertoire</primary><secondary>home.old</secondary></indexterm>home.old</tt>.</p>
<ol>
<li><p>Connectez-vous en utilisant la session de maintenance ou la
connexion &agrave; partir de la ligne de commande &agrave; partir de l'&eacute;cran
de connexion.</p>
</li>
<li><p>Copiez le r&eacute;pertoire de la session de sauvegarde vers
le nom courant. Par exemple, pour r&eacute;tablir une session initiale personnalis&eacute;e
de sauvegarde:</p>
</li>
</orderedlist>
<programlisting>cp -r <i role="Variable">R&eacute;pPersonnel</i>/.dt/sessions/home.old <i role="Variable">R&eacute;pPersonnel</i>/.dt/sessions/home</programlisting>
<p>Les sessions sp&eacute;cifiques de l'&eacute;cran peuvent &ecirc;tre
r&eacute;tablies de la m&ecirc;me mani&egrave;re.</p>
</sect2>
<sect2 id="SAG.SesMg.div.31" role="Procedure">
<h1>Analyse des incidents lors du lancement d'une session<indexterm><primary>Gestionnaire de sessions</primary><secondary>journal des erreurs</secondary>
</indexterm><indexterm><primary>Gestionnaire de sessions</primary><secondary>identification et r&eacute;solution des incidents</secondary></indexterm></h1>
<ul>
<li><p>V&eacute;rifiez le fichier <i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/startlog</tt>.<indexterm><primary>Fichier</primary>
<secondary>startlog</secondary></indexterm><indexterm><primary>Session</primary>
<secondary>erreurs de connexion</secondary></indexterm></p>
<p>Le fichier<tt>startlog</tt> contiendra les informations
de sortie (<code>stderr</code>) des applications lanc&eacute;es par
le Gestionnaire de session (sur l'h&ocirc;te du Gestionnaire de session<?Pub Caret>).
</p>
</li>
</ul>
</sect2>
</div>
<sect1 id="SAG.SesMg.div.32">
<h1 id="SAG.SesMg.mkr.10">Fichiers et r&eacute;pertoires du Gestionnaire
de sessions<indexterm><primary>Fichiers de configuration</primary><secondary>Gestionnaire de sessions</secondary></indexterm><indexterm><primary>Gestionnaire
des sessions</primary><secondary>fichiers</secondary></indexterm><indexterm>
<primary>Gestionnaire de sessions</primary><secondary>r&eacute;pertoires</secondary>
</indexterm></h1>
<ul remap="Bullet1">
<li><p><tt>/usr/dt/bin/Xsession</tt></p>
</li>
<li><p><tt>/usr/dt/config/Xsession.d/*</tt></p>
</li>
<li><p><tt>/usr/dt/bin/dtsession</tt></p>
</li>
<li><p><tt>/usr/dt/bin/dtsession_res</tt></p>
</li>
<li><p><i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions/current</tt></p>
</li>
<li><p><i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/sessions/home</tt></p>
</li>
<li><p><i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/</tt><i role="Variable">display</i><tt>/current</tt></p>
</li>
<li><p><i role="Variable">R&eacute;pPersonnel</i><tt>/.dt/</tt><i role="Variable">display</i>/<tt>home</tt></p>
</li>
</ul>
</div>
</chapter>
<!--fickle 1.14 mif-to-docbook 1.7 01/02/96 15:21:25-->
<?Pub *0000065827>
