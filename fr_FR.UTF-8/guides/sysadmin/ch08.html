<!-- $XConsortium: ch08.sgm /main/10 1996/12/20 20:39:13 rws $ -->
<!-- (c) Copyright 1995 Digital Equipment Corporation. -->
<!-- (c) Copyright 1995 Hewlett-Packard Company. -->
<!-- (c) Copyright 1995 International Business Machines Corp. -->
<!-- (c) Copyright 1995 Sun Microsystems, Inc. -->
<!-- (c) Copyright 1995 Novell, Inc. -->
<!-- (c) Copyright 1995 FUJITSU LIMITED. -->
<!-- (c) Copyright 1995 Hitachi. -->
<chapter id="SAG.IntAc.div.1">
<h1 id="SAG.IntAc.mkr.1">Introduction aux actions et aux types de donn&eacute;es</h1>
<p>Les <emphasis role="Variable">actions</em><indexterm><primary>Actions</primary><secondary>introduction</secondary></indexterm><indexterm>
<primary>Types de donn&eacute;es</primary><secondary>introduction</secondary>
</indexterm> et les <em>types de donn&eacute;es</em> permettent
d'installer des applications sur le Bureau, et de cr&eacute;er une interface
utilisateur destin&eacute;e &agrave; lancer les applications et &agrave; manipuler
les fichiers de donn&eacute;es associ&eacute;s.</p>
<informaltable id="SAG.IntAc.itbl.1" frame="All">
<tgroup cols="1" colsep="1" rowsep="1">
<colspec colwidth="4.00in">
<table>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Actions136'--><xref
role="JumpText" linkend="SAG.IntAc.mkr.2"></p></td></tr>
<tr>
<td align="left" valign="top"><p><!--Original XRef content: 'Types de
données143'--><xref role="JumpText" linkend="SAG.IntAc.mkr.5"></p></td>
</tr></table></tgroup></informaltable>
<p>Le pr&eacute;sent chapitre d&eacute;finit les notions d'action et de
type de donn&eacute;es. Il d&eacute;crit:</p>
<ul remap="Bullet1">
<li><p>les raisons pour lesquelles des actions et des types de donn&eacute;es
doivent &ecirc;tre cr&eacute;&eacute;s pour les applications</p>
</li>
<li><p>les relations existant entre les actions et les types de donn&eacute;es
</p>
</li>
<li><p>les relations existant entre les actions et les types de donn&eacute;es
et les op&eacute;rations d'impression.</p>
</li>
</ul>
<sect1 id="SAG.IntAc.div.2">
<h1>Informations connexes</h1>
<p>Les proc&eacute;dures et les r&egrave;gles de cr&eacute;ation des actions
et des types de donn&eacute;es sont d&eacute;crits dans trois chapitres du
pr&eacute;sent manuel.</p>
<ul remap="Bullet1">
<li><p>Le <!--Original XRef content:
'chapitre&numsp;9'--><xref role="ChapterNumber" linkend="SAG.dtCrA.mkr.1">
explique comment cr&eacute;er des actions et des types de donn&eacute;es &agrave;
l'aide de l'utilitaire du Bureau &ldquo;Cr&eacute;er action&rdquo;.</p>
<p>Ce programme permet de cr&eacute;er des actions et des types de donn&eacute;es
pour la plupart des applications, sans conna&icirc;tre la syntaxe utilis&eacute;e
pour leurs d&eacute;finitions.</p>
</li>
<li><p>Le <!--Original XRef content: 'chapitre&numsp;10'--><xref
role="ChapterNumber" linkend="SAG.CrAct.mkr.1"> et le <!--Original XRef content:
'chapitre&numsp;11'--><xref role="ChapterNumber" linkend="SAG.CrDT.mkr.1">
expliquent comment cr&eacute;er des actions et des types de donn&eacute;es
manuellement, &agrave; l'aide de fichiers de configuration.</p>
<p>Vous devez utiliser cette m&eacute;thode pour b&eacute;n&eacute;ficier
des fonctions avanc&eacute;es non support&eacute;es par &ldquo;Cr&eacute;er
action&rdquo;.</p>
</li>
</ul>
</div>
<sect1 id="SAG.IntAc.div.3">
<h1 id="SAG.IntAc.mkr.2">Actions<indexterm><primary>Actions</primary><secondary>introduction</secondary></indexterm></h1>
<p>Il s'agit d'instructions qui permettent d'automatiser les t&acirc;ches
de Bureau telles que le lancement d'applications et l'ouverture de fichiers
de donn&eacute;es. Leur fonctionnement est semblable &agrave; celui des macros
ou des fonctions de programmation. Toute action a un nom, qui est utilis&eacute;
pour la lancer.</p>
<p>Une fois d&eacute;finie, une action peut &ecirc;tre utilis&eacute;e
pour faciliter l'utilisation de l'interface utilisateur. En effet, le Bureau
permet d'associer les &eacute;l&eacute;ments de cette derni&egrave;re (ic&ocirc;nes,
objets de commande du Tableau de bord et options de menus) &agrave; des actions.
</p>
<figure>
<h1>Utilisation des actions</h1>
<graphic id="SAG.IntAc.grph.1" entityref="SAG.IntAc.fig.1"></graphic>
</figure>
<p>Par exemple, le groupe d'applications Outils_Bureau du Gestionnaire
d'applications contient des ic&ocirc;nes qui permettent de lancer divers programmes.
</p>
<figure>
<h1>Ic&ocirc;nes d'action du groupe d'applications Outils_Bureau</h1>
<graphic id="SAG.IntAc.grph.2" entityref="SAG.IntAc.fig.2"></graphic>
</figure>
<p>Lorsque vous cliquez deux fois sur chacune de ces ic&ocirc;nes, une
action est lanc&eacute;e. L'exemple ci-dessous repr&eacute;sente une partie
de la d&eacute;finition de l'action ex&eacute;cut&eacute;e lorsque l'utilisateur
clique deux fois sur l'ic&ocirc;ne Afficher fichier xwd. Cette action est
d&eacute;finie dans le fichier de configuration <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/xclients.dt</tt>.
</p>
<programlisting>ACTION Xwud
{
   LABEL        Afficher fichier xwd
   TYPE         COMMAND
   EXEC_STRING  /usr/bin/X11/xwud -noclick -in \
                %(File)Arg_1"Fichier xwd &agrave; afficher :"%
   &hellip;
}</programlisting>
<p>La commande indiqu&eacute;e dans la zone <tt>EXEC_STRING</tt>
est ex&eacute;cut&eacute;e lorsque l'utilisateur clique deux fois sur l'ic&ocirc;ne.
</p>
<p><indexterm><primary>Actions</primary><secondary>Tableau de bord</secondary>
</indexterm><indexterm><primary>Tableau de bord</primary><secondary>actions</secondary></indexterm>Les actions sont &eacute;galement utilis&eacute;es
sur le Tableau de bord. L'exemple ci- dessous repr&eacute;sente une partie
de la d&eacute;finition de l'objet de commande Terminal du tableau secondaire
Applications personnelles, d&eacute;fini dans le fichier de configuration <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/dtwm.fp</tt>.</p>
<programlisting>CONTROL Term
{
   ICON        Fpterm
   LABEL       Terminal
   PUSH_ACTION Dtterm
   &hellip;
}</programlisting>
<p>La zone <tt>PUSH_ACTION</tt> indique l'action ex&eacute;cut&eacute;e
lorsque l'utilisateur clique deux fois sur l'objet de commande (en l'occurrence,
il s'agit de l'action Dtterm).</p>
<p><indexterm><primary>Actions</primary><secondary>menus</secondary></indexterm><indexterm>
<primary>Menus</primary><secondary>actions</secondary></indexterm>Les actions
sont &eacute;galement utilis&eacute;es dans les menus, tels que le menu S&eacute;lectionn&eacute;(s)
associ&eacute; aux fichiers de donn&eacute;es, dans le Gestionnaire de fichiers.
Par exemple, les fichiers XWD (portant l'extension <tt>.xwd</tt>
ou<tt>.wd</tt>) disposent d'une action Ouvrir, qui permet de les
afficher &agrave; l'aide de l'action Xwud.</p>
<figure>
<h1>Action Ouvrir associ&eacute;e aux fichiers de type XWD</h1>
<graphic id="SAG.IntAc.grph.3" entityref="SAG.IntAc.fig.3"></graphic>
</figure>
<p>Les actions du<indexterm><primary>Menus</primary><secondary>S&eacute;lectionn&eacute;(s)</secondary></indexterm> menu S&eacute;lectionn&eacute;(s) sont indiqu&eacute;es
dans la d&eacute;finition du type de donn&eacute;es des fichiers XWD, figurant
dans le fichier de configuration <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/xclients.dt.</tt></p>
<programlisting>DATA_ATTRIBUTES XWD
{
   ACTIONS  Ouvrir,Imprimer
   ICON     Dtxwd
   &hellip;
}</programlisting>
<p>Le type de donn&eacute;es XWD et les actions associ&eacute;es (Ouvrir
et Imprimer) sont d&eacute;crit &agrave; la section <!--Original XRef content:
'&rdquo;Association des fichiers de données aux actions par l'intermédiaire
des types de données&rdquo;, page&numsp;144'--><xref role="SecTitleAndPageNum"
linkend="SAG.IntAc.mkr.6">.</p>
<sect2 id="SAG.IntAc.div.4">
<h1><indexterm><primary>Actions</primary><secondary>cr&eacute;ation d'ic&ocirc;nes
d'application</secondary></indexterm><indexterm><primary>Applications</primary>
<secondary>cr&eacute;ation d'ic&ocirc;nes</secondary></indexterm><indexterm>
<primary>Ic&ocirc;nes</primary><secondary>applications</secondary></indexterm>Cr&eacute;ation
d'ic&ocirc;nes d'application</h1>
<p>Par exemple, lorsque vous cliquez deux fois sur l'ic&ocirc;ne Afficher
fichier xwd, dans le groupe d'applications Outils_Bureau, le client X <code>xwud</code> est lanc&eacute;. Cependant, cette ic&ocirc;ne ne repr&eacute;sente
pas directement le programme ex&eacute;cutable <code>xwud</code> (<tt>/usr/bin/X11/xwud</tt>).</p>
<p>L'ic&ocirc;ne Afficher fichier xwd appara&icirc;t dans ce groupe d'applications
car il existe dans le r&eacute;pertoire correspondant un fichier appel&eacute; <tt>Xwud</tt> (voir la <!--Original XRef content: 'Figure&numsp;8&hyphen;4'--><xref
role="CodeOrFigureOrTable" linkend="SAG.IntAc.mkr.3">); ce fichier repr&eacute;sente
une action sous-jacente portant le m&ecirc;me nom (Xwud). Dans la d&eacute;finition
de l'action, le nom de cette derni&egrave;re est celui indiqu&eacute; apr&egrave;s
le mot cl&eacute; <code>ACTION</code>:</p>
<programlisting>ACTION Xwud
{
   LABEL        Afficher fichier xwd
   TYPE         COMMAND
   WINDOW_TYPE  NO_STDIO
   EXEC_STRING  /usr/bin/X11/xwud -noclick -in \
                %(File)Arg_1"Fichier xwd &agrave; afficher :"%
   DESCRIPTION  L'action Afficher fichier xwd (Xwud) \
                permet d'afficher un fichier xwd cr&eacute;&eacute; &agrave; l'aide \
                de l'action Capturer Xwd (Xwd). Elle utilise \
                la commande xwud.
}</programlisting>
<p><indexterm><primary>Fichier</primary><secondary>d'action</secondary>
<tertiary>d&eacute;finition</tertiary></indexterm>Ce fichier d&eacute;finissant
une action, il est appel&eacute; <em>fichier d'actions</em>(un
fichier d'action doit &ecirc;tre ex&eacute;cutable et porter le m&ecirc;me
nom que l'action). Son ic&ocirc;ne dans le Gestionnaire d'applications ou
de fichiers est appel&eacute;e<indexterm><primary>Ic&ocirc;ne d'action</primary>
</indexterm> <em>ic&ocirc;ne d'action</em> ou<indexterm><primary>Ic&ocirc;ne d'application</primary><secondary>cr&eacute;ation</secondary>
</indexterm> <em>ic&ocirc;ne d'application</em>; en effet, lorsque
vous cliquez deux fois dessus, une application est lanc&eacute;e.</p>
<figure>
<h1 id="SAG.IntAc.mkr.3">Ic&ocirc;ne d'application (action) correspondant
&agrave; un fichier d'action</h1>
<graphic id="SAG.IntAc.grph.4" entityref="SAG.IntAc.fig.4"></graphic>
</figure>
<p>Lorsque le Gestionnaire d'applications d&eacute;tecte un fichier ex&eacute;cutable,
il v&eacute;rifie qu'il existe une action portant le m&ecirc;me nom dans la
base de donn&eacute;es des actions. Si tel est le cas, il consid&egrave;re
le fichier comme un fichier d'action.</p>
<p><indexterm><primary>Fichier</primary><secondary>d'action</secondary>
<tertiary>contenu</tertiary></indexterm>Le contenu d'un fichier d'action n'a
pas d'importance; g&eacute;n&eacute;ralement, il fournit des informations
sur la fonction de l'action.</p>
<note>
<p>Ne confondez pas <em>fichier d'action</em> et <em>fichier de d&eacute;finition d'action</em>. Le premier porte le m&ecirc;me
nom que l'action; il est utilis&eacute; pour cr&eacute;er une <em>ic&ocirc;ne d'application</em> dans le Gestionnaire de fichiers ou d'applications.
Le second est le fichier <i role="Variable">nom</i><tt>.dt</tt>, qui contient la d&eacute;finition de l'action.</p>
</note>
<p>Une fois que le Bureau a identifi&eacute; un fichier comme &eacute;tant
un fichier d'action, la d&eacute;finition sous-jacente est utilis&eacute;e
pour d&eacute;finir l'apparence et le comportement de ce fichier.</p>
<ul remap="Bullet1">
<li><p>La zone <tt>EXEC_STRING</tt> d&eacute;finit le
comportement de l'ic&ocirc;ne d'application. Dans le cas de l'ic&ocirc;ne
Afficher fichier xwd, cette zone indique que l'ic&ocirc;ne d'action lance
le client X <code>xwud</code> en utilisant certains arguments de ligne
de commande.</p>
</li>
<li><p>La zone <code>LABEL</code> d&eacute;finit le libell&eacute;
de l'ic&ocirc;ne d'application.</p>
</li>
<li><p>La zone <code>DESCRIPTION</code> d&eacute;finit le texte
qui appara&icirc;t lorsque l'utilisateur acc&egrave;de &agrave; l'aide sur
l'&eacute;l&eacute;ment.</p>
</li>
<li><p>L'ic&ocirc;ne d'application Xwud utilise l'image par d&eacute;faut
car sa d&eacute;finition d'action ne contient pas la zone <code>ICON</code>.
</p>
<p>A l'inverse, l'ic&ocirc;ne &rdquo;Comprimer fichier&rdquo; utilise une
image personnalis&eacute;e, d&eacute;finie dans la zone <code>ICON</code>
de sa d&eacute;finition d'action.</p>
<p>Par exemple:</p>
<programlisting remap="CodeIndent1">ACTION Compress 
   LABEL Comprimer fichier 
   ICON  Dtcmprs
   &hellip; 
}</programlisting>
</li>
</ul>
<figure>
<h1>Image d'ic&ocirc;ne indiqu&eacute;e dans la zone ICON de la d&eacute;finition
d'action</h1>
<graphic id="SAG.IntAc.grph.5" entityref="SAG.IntAc.fig.5"></graphic>
</figure>
<p>L'action <code>Xwud</code> est une action de <em>commande</em> car sa d&eacute;finition contient une commande (dans la zone <code>EXEC_STRING</code>) &agrave; ex&eacute;cuter. La zone <code>TYPE</code>
de la d&eacute;finition de l'action indique le type de cette derni&egrave;re.
</p>
<p>A l'origine, l'ic&ocirc;ne &ldquo;Afficher fichier xwd&rdquo; appara&icirc;t
dans le groupe d'applications <structname>Outils_Bureau</structname>; vous
pouvez cependant la copier dans un r&eacute;pertoire quelconque auquel vous
avez acc&egrave;s en &eacute;criture. Tant que la d&eacute;finition de l'action
Xwud figure dans la base de donn&eacute;es des actions, tout fichier ex&eacute;cutable <code>Xwud</code> que vous cr&eacute;ez est consid&eacute;r&eacute; comme un
fichier d'action associ&eacute;, et son ic&ocirc;ne dans le Gestionnaire de
fichiers ou d'applications peut &ecirc;tre utilis&eacute;e pour lancer l'action.
</p>
</sect2>
<sect2 id="SAG.IntAc.div.5">
<h1 id="SAG.IntAc.mkr.4">Utilisation des fichiers de donn&eacute;es comme<indexterm>
<primary>Actions</primary><secondary>arguments de fichiers</secondary></indexterm><indexterm>
<primary>Arguments</primary><secondary>actions</secondary></indexterm> arguments</h1>
<p>L'<indexterm><primary>Arguments</primary><secondary>actions</secondary>
</indexterm><i role="Variable">argument</i> d'une commande est l'&eacute;l&eacute;ment
(il s'agit g&eacute;n&eacute;ralement d'un<indexterm><primary>Arguments</primary>
<secondary>de fichier</secondary><tertiary>actions</tertiary></indexterm>
fichier) sur lequel elle est ex&eacute;cut&eacute;e. Les arguments des actions
peuvent &ecirc;tre des fichiers.</p>
<p>Par exemple, la zone <tt>EXEC_STRING</tt> de l'action Xwud
indique qu'un fichier doit &ecirc;tre sp&eacute;cifi&eacute; comme argument
:</p>
<programlisting>EXEC_STRING   /usr/bin/X11/xwud -noclick -in \
              %(File)Arg_1"Fichier xwd &agrave; afficher :"%</programlisting>
<p><code>Arg</code> correspond &agrave; <i role="Variable">argument.</i> La forme<indexterm><primary>Syntaxe</primary><secondary>Arg_1</secondary></indexterm> <tt>Arg_1</tt> d&eacute;signe le
premier argument, et <tt>(File)</tt> indique que l'action consid&egrave;re
l'argument comme un fichier.</p>
<p><indexterm><primary>Ic&ocirc;ne d'application</primary><secondary>poser
un fichier</secondary></indexterm><indexterm><primary>Actions</primary><secondary>poser un fichier</secondary></indexterm><indexterm><primary>Ic&ocirc;ne d'application</primary><secondary>cliquer deux fois</secondary></indexterm>Pour indiquer
un fichier comme argument, la m&eacute;thode la plus simple consiste &agrave;
poser un fichier de donn&eacute;es sur l'ic&ocirc;ne d'application. Le Bureau
identifie le chemin d'acc&egrave;s du fichier pos&eacute; et le substitue,
sur la ligne de commande, au texte figurant entre les signes % ( <computeroutput>%(File)Arg_1&ldquo;Fichier xwd &agrave; afficher:&rdquo;%</computeroutput>).
La commande ex&eacute;cut&eacute;e est la suivante:</p>
<programlisting>/usr/bin/X11/xwud -noclick -in <i role="Variable">chemin_fichier</i></programlisting>
<p>Lorsque l'utilisateur clique deux fois sur l'ic&ocirc;ne d'application,
le Bureau consulte la zone <tt>EXEC_STRING</tt> et affiche une
bo&icirc;te de dialogue invitant l'utilisateur &agrave; sp&eacute;cifier un
nom ou un chemin d'acc&egrave;s de fichier. Dans le cas de l'action <code>Xwud</code>, le message est le suivant:</p>
<p><computeroutput>Fichier xwd &agrave; afficher :</computeroutput></p>
<p>Le nom ou le chemin d'acc&egrave;s de fichier indiqu&eacute; par l'utilisateur
est utilis&eacute; comme argument.</p>
</sect2>
<sect2 id="SAG.IntAc.div.6">
<h1>Fonctions suppl&eacute;mentaires<indexterm><primary>Actions</primary>
<secondary>fonctions</secondary></indexterm></h1>
<p>Outre le lancement des applications, les actions permettent d'effectuer
les op&eacute;rations d&eacute;crites ci-dessous.</p>
<ul remap="Bullet1">
<li><p>Sur le Tableau de bord:</p>
<p>La d&eacute;finition d'un objet de commande du Tableau de bord comporte
des zones qui indiquent l'action ex&eacute;cut&eacute;e lorsque l'utilisateur
clique ou pose un fichier sur l'objet de commande. Pour plus de d&eacute;tails,
reportez-vous &agrave; la section <!--Original XRef content: '&rdquo;Définition
des objets de commande du Tableau de bord&rdquo;, page&numsp;241'--><xref
role="SecTitleAndPageNum" linkend="SAG.FrPC.mkr.15">.</p>
</li>
<li><p>Dans les menus:</p>
<p>La syntaxe de la d&eacute;finition des menus Fen&ecirc;tre et Espace
de travail permet d'indiquer l'action ex&eacute;cut&eacute;e par une option
de menu. Pour plus de d&eacute;tails, reportez-vous &agrave; la section <!--Original
XRef content: '&rdquo;Menus du Gestionnaire de l'espace de travail&rdquo;,
page&numsp;261'--><xref role="SecTitleAndPageNum" linkend="SAG.WMCnf.mkr.8">
et &agrave; la page de manuel <filename moreinfo="RefEntry">dtwmrc(4)</tt>.
</p>
</li>
<li><p>Dans le domaine de la communication entre applications:</p>
<p>Une application peut &ecirc;tre configur&eacute;e de mani&egrave;re
&agrave; envoyer et &agrave; recevoir des informations par l'interm&eacute;diaire
d'un type d'action sp&eacute;cial appel&eacute; message ToolTalk ( <tt>TT_MSG</tt>). Les actions <tt>TT_MSG</tt> sont d&eacute;crites
dans la documentation destin&eacute;e au d&eacute;veloppeur et propre &agrave;
l'environnement utilis&eacute;.</p>
</li>
</ul>
</sect2>
</div>
<sect1 id="SAG.IntAc.div.7">
<h1 id="SAG.IntAc.mkr.5">Types de donn&eacute;es<indexterm><primary>Types
de donn&eacute;es</primary><secondary>introduction</secondary></indexterm></h1>
<p>L'apparence et le comportement de l'ic&ocirc;ne d'un fichier de donn&eacute;es
dans le Gestionnaire de fichiers sont fonction du type de donn&eacute;es du
fichier. Le Bureau permet d'associer des caract&eacute;ristiques personnalis&eacute;es
aux fichiers et aux r&eacute;pertoires, gr&acirc;ce au m&eacute;canisme de
classification des donn&eacute;es selon leur type.</p>
<sect2 id="SAG.IntAc.div.8">
<h1><indexterm><primary>Cr&eacute;er action</primary><secondary>type de
donn&eacute;es</secondary></indexterm><indexterm><primary>Types de donn&eacute;es</primary><secondary>Cr&eacute;er action</secondary></indexterm>D&eacute;finition</h1>
<p>Un type de donn&eacute;es est une structure d&eacute;finie dans la base
de donn&eacute;es du Bureau. L'exemple ci-dessous illustre la d&eacute;finition
du type de donn&eacute;es XWD, figurant dans le fichier de configuration <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/xclients.dt</tt>.</p>
<programlisting>DATA_ATTRIBUTES XWD
{
   ACTIONS        Ouvrir,Imprimer
   ICON           Dtxwd
   NAME_TEMPLATE  %s.xwd
   MIME_TYPE      application/octet-stream
   SUNV3_TYPE     xwd-file
   DESCRIPTION    Ce fichier contient une image au format XWD.\ 
                  Il s'agit g&eacute;n&eacute;ralement de captures de\ 
                  fen&ecirc;tres effectu&eacute;es &agrave; l'aide de l'action\ 
                  Capturer xwd. Son type de donn&eacute;es est XWD et\ 
                  son extension, .xwd ou .wd.
}
DATA_CRITERIA XWD1
{
   DATA_ATTRIBUTES_NAME XWD
   MODE                 f
   NAME_PATTERN         *.xwd
}
DATA_CRITERIA XWD2
{
   DATA_ATTRIBUTES_NAME XWD
   MODE                 f
   NAME_PATTERN         *.wd
}</programlisting>
<p>Toute d&eacute;finition de type de donn&eacute;es se compose des deux
parties suivantes:</p>
<informaltable>
<tgroup cols="2" colsep="0" rowsep="0">
<colspec colwidth="193*">
<colspec colwidth="335*">
<table>
<tr>
<td align="left" valign="top"><p><tt>DATA_ATTRIBUTES</tt></p></td>
<td align="left" valign="top"><p>D&eacute;finit l'apparence et le comportement
du type de donn&eacute;es.</p></td></tr>
<tr>
<td align="left" valign="top"><p><tt>DATA_CRITERIA</tt></p></td>
<td align="left" valign="top"><p>Indique les crit&egrave;res (nom ou
contenu) permettant d'attribuer le type de donn&eacute;es &agrave; un fichier.
</p></td></tr></table></tgroup></informaltable>
<p>La zone <tt>DATA_ATTRIBUTES_NAME</tt> permet d'associer
les crit&egrave;res aux attributs.</p>
<p>Plusieurs zones <tt>DATA_CRITERIA</tt> peuvent &ecirc;tre
indiqu&eacute;es pour une zone <tt>DATA_ATTRIBUTE</tt>. Par exemple,
pour le type de donn&eacute;es XWD, deux crit&egrave;res <tt>NAME_PATTERN</tt> permettent d'indiquer deux extensions diff&eacute;rentes ( <tt>.xwd</tt> et <tt>.wd</tt>).</p>
</sect2>
<sect2 id="SAG.IntAc.div.9">
<h1 id="SAG.IntAc.mkr.6"><indexterm><primary>Types de donn&eacute;es</primary>
<secondary>relations avec les actions</secondary></indexterm><indexterm>
<primary>Actions</primary><secondary>relations avec les types de donn&eacute;es</secondary></indexterm>Association des fichiers de donn&eacute;es aux actions
par l'interm&eacute;diaire des types de donn&eacute;es</h1>
<p>Dans le cas du type de donn&eacute;es XWD, l'utilisateur cr&eacute;e
un fichier en lui attribuant l'une des extensions suivantes: <tt>.xwd</tt> ou<tt>.wd</tt>. Le Bureau utilise le nom du fichier
en tant que <em>crit&egrave;re</em> pour l'associer au type de
donn&eacute;es appropri&eacute;.</p>
<p>Tout fichier de type XWD dispose des &eacute;l&eacute;ments suivants:
</p>
<ul remap="Bullet1">
<li><p>une ic&ocirc;ne unique permettant d'identifier les fichiers
de donn&eacute;es</p>
</li>
<li><p>des informations d'aide sur l'&eacute;l&eacute;ment qui d&eacute;crivent
le type de donn&eacute;es</p>
</li>
<li><p>un menu S&eacute;lectionn&eacute;(s) personnalis&eacute; dans
le Gestionnaire de fichiers, contenant les options Ouvrir et Imprimer (l'action
Ouvrir lance l'action <code>Xwud</code>)</p>
</li>
</ul>
<sect3 id="SAG.IntAc.div.10">
<h1>Lancement d'actions &agrave; partir du menu S&eacute;lectionn&eacute;(s)<indexterm>
<primary>Menus</primary><secondary>S&eacute;lectionn&eacute;(s)</secondary>
</indexterm></h1>
<p>Le menu S&eacute;lectionn&eacute;(s) du Gestionnaire de fichiers n'est
actif que lorsqu'un fichier ou un r&eacute;pertoire est s&eacute;lectionn&eacute;.
Les options figurant dans la partie inf&eacute;rieure de ce menu sont fonction
du type de donn&eacute;es du fichier. Par exemple, s'il s'agit d'un fichier <tt>XWD</tt>, les actions Ouvrir et Imprimer sont disponibles.</p>
<p>Les options indiqu&eacute;es au bas du menu S&eacute;lectionn&eacute;(s)
sont sp&eacute;cifi&eacute;es dans la zone <code>ACTIONS</code> de la
d&eacute;finition du type de donn&eacute;es.</p>
<programlisting>DATA_ATTRIBUTES XWD 
{ 
   ACTIONS Ouvrir,Imprimer 
   &hellip; 
}</programlisting>
<p><indexterm><primary>Menus</primary><secondary>S&eacute;lectionn&eacute;(s)</secondary></indexterm>Le contenu du menu S&eacute;lectionn&eacute;(s) d&eacute;pend
du type de donn&eacute;es. Cependant, l'action Ouvrir est commune &agrave;
de nombreux types de donn&eacute;es (ce qui signifie qu'elle figure dans le
menu qui s'affiche lorsque vous s&eacute;lectionnez un fichier dans le Gestionnaire
de fichiers et que vous ouvrez le menu S&eacute;lectionn&eacute;(s) correspondant).
</p>
<figure>
<h1>Menu S&eacute;lectionn&eacute;(s) d'un fichier XWD</h1>
<graphic id="SAG.IntAc.grph.6" entityref="SAG.IntAc.fig.6"></graphic>
</figure>
<p>G&eacute;n&eacute;ralement, l'<indexterm><primary>Actions</primary>
<secondary>Ouvrir</secondary></indexterm> action Ouvrir lance l'application
associ&eacute;e au fichier de donn&eacute;es. Par exemple, lorsque vous ouvrez
un fichier <tt>XWD</tt>, l'action <code>Xwud</code> est
ex&eacute;cut&eacute;e: le client X xwud est lanc&eacute; pour afficher le
fichier. En d'autres termes, l'action Ouvrir est &eacute;quivalente &agrave;
l'action Xwud. De m&ecirc;me, lorsque vous ouvrez un fichier <tt>TEXTFILE</tt>, l'Editeur de texte est lanc&eacute;; dans le cas d'un fichier <tt>BM</tt> (bitmap) ou <tt>PM</tt> (pixmap), l'Editeur d'ic&ocirc;nes
est lanc&eacute;.</p>
<p>La possibilit&eacute; de cr&eacute;er des actions Ouvrir qui effectuent
diff&eacute;rentes op&eacute;rations repose sur les deux fonctions d&eacute;crites
ci-dessous.</p>
<ul remap="Bullet1">
<li><p><indexterm><primary>Actions</primary><secondary>mappage</secondary>
</indexterm>Mappage des actions</p>
<p>Cette fonction permet de cr&eacute;er une action qui en lance une autre,
au lieu d'ex&eacute;cuter directement une commande. Par exemple, vous pouvez
cr&eacute;er une action Ouvrir qui renvoie &agrave; (lance) l'action <code>Xwud</code>.</p>
</li>
<li><p><indexterm><primary>Actions</primary><secondary>restrictions</secondary></indexterm>Restrictions en fonction du type de donn&eacute;es
</p>
<p>Les d&eacute;finitions d'actions peuvent contenir une zone <tt>ARG_TYPE</tt> permettant d'associer l'action &agrave; certains types
de donn&eacute;es uniquement. Par exemple, vous pouvez faire en sorte que
l'action Ouvrir (qui renvoie &agrave; l'action <code>Xwud</code>) ne
s'applique qu'aux fichiers dont le type de donn&eacute;es est <tt>XWD</tt>.</p>
</li>
</ul>
<p>La d&eacute;finition ci-dessous permet d'associer l'action Ouvrir &agrave;
l'action Xwud pour le type de donn&eacute;es XWD. Elle figure dans le fichier
de configuration de base de donn&eacute;es <tt>/usr/dt/appconfig/types/<i>langue</i>/xclients.dt</tt>.</p>
<programlisting>ACTION Ouvrir
{
   LABEL       Ouvrir
   ARG_TYPE    XWD
   TYPE        MAP
   MAP_ACTION  Xwud
}</programlisting>
<p>La zone <code>TYPE</code> indique qu'il s'agit d'une action mapp&eacute;e
et la zone <tt>MAP_ACTION</tt>, qu'elle lance l'action Xwud. La
zone <tt>ARG_TYPE</tt> sp&eacute;cifie que l'action ne s'applique
qu'aux fichiers dont le type de donn&eacute;es est XWD.</p>
<p>Comparez la d&eacute;finition pr&eacute;c&eacute;dente de l'action Ouvrir
&agrave; la d&eacute;finition suivante, qui figure dans le fichier de base
de donn&eacute;es <tt>/usr/dt/appconfig/types/<i>langue</i>/dt.dt</tt>:</p>
<programlisting>ACTION Ouvrir
{
   LABEL      Ouvrir
   ARG_TYPE   BM
   TYPE       MAP
   MAP_ACTION Dticon
}</programlisting>
<p>Cette d&eacute;finition ne s'applique qu'aux fichiers dont le type de
donn&eacute;es (<tt>ARG_TYPE</tt>) est BM (bitmaps). Elle renvoie
l'action Ouvrir &agrave; l'action <code>Dticon</code>, qui lance l'Editeur
d'ic&ocirc;nes.</p>
</sect3>
<sect3 id="SAG.IntAc.div.11">
<h1><indexterm><primary>Types de donn&eacute;es</primary><secondary>double
clic</secondary></indexterm>Comportement du double clic</h1>
<p>Le comportement du double clic est d&eacute;fini par la premi&egrave;re
entr&eacute;e de la zone <code>ACTIONS</code>. Par exemple, dans le
cas du type de donn&eacute;es XWD, le double clic entra&icirc;ne le lancement
de l'action Ouvrir, qui &agrave; son tour lance l'action <code>Xwud</code>.
</p>
</sect3>
<sect3 id="SAG.IntAc.div.12">
<h1><indexterm><primary>Types de donn&eacute;es</primary><secondary>pose</secondary></indexterm>Poser un fichier sur une ic&ocirc;ne d'action</h1>
<p>Lorsque l'utilisateur pose un fichier de donn&eacute;es sur une ic&ocirc;ne
d'action, le syst&egrave;me lance l'action en utilisant le fichier comme argument
(voir la section <!--Original XRef content: '&rdquo;Utilisation des fichiers
de données comme arguments&rdquo;, page&numsp;142'--><xref role="SecTitleAndPageNum"
linkend="SAG.IntAc.mkr.4">).</p>
<p>Par exemple, lorsqu'un fichier <tt>XWD</tt> est pos&eacute;
sur l'ic&ocirc;ne Afficher fichier xwd, l'action <code>Xwud</code> est
lanc&eacute;e et le fichier est utilis&eacute; comme argument (le client X <code>xwud</code> est lanc&eacute; pour afficher le fichier de donn&eacute;es).
</p>
</sect3>
</sect2>
<sect2 id="SAG.IntAc.div.13">
<h1><indexterm><primary>Types de donn&eacute;es</primary><secondary>impression</secondary></indexterm><indexterm><primary>Impression</primary><secondary>configuration pour un type de donn&eacute;es</secondary></indexterm>Configuration
de la fonction d'impression pour un type de donn&eacute;es</h1>
<p>Pour imprimer un fichier de donn&eacute;es &agrave; partir du Bureau,
vous pouvez:</p>
<ul remap="Bullet1">
<li><p>utiliser l'option Imprimer du menu S&eacute;lectionn&eacute;(s)
du Gestionnaire de fichiers (si elle est disponible)</p>
</li>
<li><p>poser un fichier sur une zone de pose d'impression (l'objet
de commande Imprimante du Tableau de bord ou une ic&ocirc;ne d'imprimante
dans le Gestionnaire d'impression)</p>
</li>
</ul>
<p>Vous pouvez &eacute;galement lancer des impressions &agrave; partir
du nombreuses applications.</p>
<p>L'impression &agrave; partir du Bureau se fait &agrave; l'aide de l'action
Imprimer. Tout comme Ouvrir, cette action est utilis&eacute;e pour de nombreux
types de donn&eacute;es. Elle est donc mapp&eacute;e &agrave; d'autres actions,
et la zone <tt>ARG_TYPE</tt> permet de personnaliser l'impression
pour les diff&eacute;rents types de donn&eacute;es.</p>
<p>Par exemple, l'exemple ci-dessous illustre l'action Imprimer associ&eacute;e
au type de donn&eacute;es XWD. Elle est d&eacute;finie dans le fichier <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/xclients.dt</tt>:</p>
<programlisting>ACTION Imprimer
{
   LABEL       Imprimer
   ARG_TYPE    XWD
   TYPE        MAP
   MAP_ACTION  NoPrint
}</programlisting>
<p>Cette action Imprimer, propre aux fichiers XWD, est mise en correspondance
avec une action NoPrint, d&eacute;finie dans le fichier <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/dt.dt</tt>.
Cette<indexterm><primary>Actions</primary><secondary>NoPrint</secondary>
</indexterm> action affiche une bo&icirc;te de dialogue informant l'utilisateur
que l'impression du type de donn&eacute;es est impossible.</p>
<p>Comparez l'action Imprimer des fichiers <tt>XWD</tt> avec
la suivante (fichiers<tt>PCL</tt>):</p>
<programlisting>ACTION Imprimer
{
   LABEL      Imprimer
   ARG_TYPE   PCL
   TYPE       MAP
   MAP_ACTION PrintRaw
}</programlisting>
<p>L'action PrintRaw, d&eacute;finie dans le fichier de configuration <tt>/usr/dt/appconfig/types/</tt><i role="Variable">langue</i><tt>/print.dt</tt>, indique la commande permettant d'imprimer les fichiers
PCL.</p>
<programlisting>ACTION PrintRaw
{
   TYPE         COMMAND
   WINDOW_TYPE  NO_STDIO
   EXEC_STRING  /usr/dt/bin/dtlp -w %(File)Arg_1%
}</programlisting>
</sect2>
</div>
</chapter>
<!--fickle 1.14 mif-to-docbook 1.7 01/02/96 15:21:25-->
<?Pub Caret>
<?Pub *0000037363>
